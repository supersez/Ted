    <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text File Search</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }

        .search-container {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        #searchInput {
            flex: 1;
            padding: 10px;
            font-size: 16px;
        }

        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        .result-item {
            margin-bottom: 30px;
            border-left: 4px solid #4CAF50;
            padding-left: 15px;
        }

        .filename {
            font-size: 20px;
            color: #333;
            margin-bottom: 10px;
        }

        .match-box {
            background-color: #f8f8f8;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .line-number {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .line-text {
            color: #333;
            white-space: pre-wrap;
        }

        .no-results {
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Enter search term...">
        <button onclick="performSearch()">Search</button>
    </div>
    <div id="resultsContainer"></div>
<script>
    const textFiles = [
        'redfiles.js',
        'lastly',
        'list.txt'
    ];

    function normalizeText(text) {
        return text.toLowerCase().replace(/[^a-z0-9]/g, '');
    }

    function calculateMatchScore(searchWords, lineWords) {
        let exactMatches = 0;
        let partialMatches = 0;
        let totalScore = 0;

        for (const searchWord of searchWords) {
            let wordMatched = false;
            let bestWordScore = 0;

            for (const lineWord of lineWords) {
                // Exact match check
                if (lineWord === searchWord) {
                    exactMatches++;
                    totalScore += 2; // Higher weight for exact matches
                    wordMatched = true;
                    break;
                }

                // Partial match check (prefix or substring)
                const partialScore = lineWord.startsWith(searchWord) ? 1 : 
                                   lineWord.includes(searchWord) ? 0.5 : 0;
                
                if (partialScore > bestWordScore) {
                    bestWordScore = partialScore;
                }
            }

            if (!wordMatched && bestWordScore > 0) {
                partialMatches++;
                totalScore += bestWordScore;
            }
        }

        // Bonus for matching more search words
        const coverageBonus = (exactMatches + partialMatches) / searchWords.length;
        
        return {
            score: totalScore + coverageBonus,
            exactMatches,
            partialMatches
        };
    }

    async function performSearch() {
        const rawSearch = document.getElementById('searchInput').value.trim();
        const resultsContainer = document.getElementById('resultsContainer');
        resultsContainer.innerHTML = '';

        if (!rawSearch) {
            resultsContainer.innerHTML = '<div class="no-results">Please enter a search term</div>';
            return;
        }

        const searchTerms = normalizeText(rawSearch).split(/\s+/).filter(w => w.length > 0);
        let hasResults = false;
        const allMatches = [];

        for (const file of textFiles) {
            try {
                const response = await fetch(file);
                const text = await response.text();
                const lines = text.split('\n');

                for (let i = 0; i < lines.length; i++) {
                    const originalLine = lines[i];
                    const line = normalizeText(originalLine);
                    const lineWords = line.split(/\s+/);

                    if (lineWords.length === 0) continue;

                    const { score, exactMatches } = calculateMatchScore(searchTerms, lineWords);
                    
                    if (score > 0) {
                        allMatches.push({
                            file,
                            lineNumber: i + 1,
                            text: originalLine,
                            score,
                            exactMatches
                        });
                    }
                }
            } catch (error) {
                console.error(`Error loading file ${file}:`, error);
            }
        }

        // Sort matches by relevance
        allMatches.sort((a, b) => {
            if (b.exactMatches !== a.exactMatches) return b.exactMatches - a.exactMatches;
            if (b.score !== a.score) return b.score - a.score;
            return a.file.localeCompare(b.file);
        });

        // Group results by file
        const fileGroups = {};
        for (const match of allMatches) {
            if (!fileGroups[match.file]) {
                fileGroups[match.file] = [];
            }
            fileGroups[match.file].push(match);
        }

        // Display results
        for (const [file, matches] of Object.entries(fileGroups)) {
            hasResults = true;
            const resultDiv = document.createElement('div');
            resultDiv.className = 'result-item';
            resultDiv.innerHTML = `
                <div class="filename">${file}</div>
                ${matches.map(match => `
                    <div class="match-box">
                        <div class="line-number">Line ${match.lineNumber}</div>
                        <div class="line-text">${match.text}</div>
                    </div>
                `).join('')}
            `;
            resultsContainer.appendChild(resultDiv);
        }

        if (!hasResults) {
            resultsContainer.innerHTML = '<div class="no-results">No matching results found</div>';
        }
    }
</script>
</body>
</html>
